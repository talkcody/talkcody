---
title: Telegram 远程控制
sidebarTitle: Telegram
description: 通过 Telegram 在手机上发送消息，桌面端 TalkCody 执行任务并回传结果。
icon: Telegram
---

import { Callout } from 'fumadocs-ui/components/callout';

## 功能简介

Telegram 远程控制让你在手机 Telegram 里发送消息，桌面端 TalkCody 在后台执行任务，并将结果流式回传到手机。

适合场景：

- 远程启动任务、随时查看进度
- 在通勤或外出时获取任务结果
- 处理需要长时间运行的任务

## 使用前准备

### 1. 在 Telegram 中创建 Bot

1. 打开 Telegram，搜索 **@BotFather**
2. 发送 `/newbot` 命令
3. 按提示输入 Bot 的名称（如「TalkCody 远程控制」）
4. 输入 Bot 的用户名（必须以 `bot` 结尾，如 `talkcody_remote_bot`）
5. 创建成功后，BotFather 会发送一条消息，其中包含 **Bot Token**

<Callout type="warning">
请妥善保管 Bot Token，不要公开或分享给他人。如 Token 泄露，可在 BotFather 中发送 `/revoke` 命令重置。
</Callout>

### 2. 确保桌面端 TalkCody 正在运行

Telegram 远程控制需要桌面端 TalkCody 保持运行状态才能接收和处理消息。

## 配置步骤

1. 打开 TalkCody 设置页
2. 找到「Telegram 远程控制」
3. 打开「启用 Telegram 远程控制」开关
4. 填写 **Bot Token**（从 BotFather 获取）
5. （可选）填写 **允许的 Chat ID**：
   - 留空：允许所有聊天
   - 多个 Chat ID 用逗号分隔
6. 设置**轮询超时**（5-60 秒，推荐 10-30 秒）
7. 保存设置

## 指令说明

| 指令 | 作用 | 示例 |
|------|------|------|
| `/new` | 新建任务 | `/new 帮我总结今天的会议记录` |
| `/status` | 查看当前任务状态 | `/status` |
| `/stop` | 停止当前任务 | `/stop` |
| `/model` | 切换模型 | `/model claude-sonnet-4-20250514` |
| `/project` | 切换项目 | `/project my-project` |
| `/agent` | 切换 Agent | `/agent code-reviewer` |
| `/list` | 查看列表（模型/项目/Agent） | `/list -p` 查看项目列表 |
| `/approve` | 批准文件编辑 | `/approve` |
| `/reject` | 拒绝文件编辑 | `/reject` |
| `/help` | 查看帮助 | `/help` |

<Callout type="info">
在群聊中使用命令时，可能需要附加 Bot 用户名，如 `/new@talkcody_remote_bot 任务内容`。
</Callout>

## 支持的输入类型

Telegram 远程控制支持以下输入类型：

| 类型 | 说明 |
|------|------|
| 文字 | 纯文本消息 |
| 图片 | 上传的照片，最大 20MB |
| 语音 | 语音消息，自动转文字处理 |
| 音频 | 音频文件（MP3 等） |
| 文件 | 普通文件（文档等），最大 20MB |

## 核心流程

1. Telegram 消息进入后，TalkCody 创建或复用对应任务
2. 执行任务时会持续把结果更新到 Telegram
3. 任务完成后会分段发送完整结果

## 常见问题

### 1. 为什么没有收到回复？

- 请确认 TalkCody 正在运行
- 请确认 Bot Token 正确
- 如果设置了允许的 Chat ID，请确认当前 Chat ID 在白名单中
- 轮询超时过小可能导致频繁请求失败，建议 10-30 秒
- 检查 Bot 是否已启动（在 BotFather 中发送 `/setinline` 等命令确认状态）

### 2. 支持群聊吗？

当前版本不支持群聊，只支持私聊。

### 3. 如何停止任务？

发送 `/stop` 即可停止当前任务。

### 4. 如何切换模型/项目/Agent？

- `/model <modelId>` - 切换主模型
- `/project <projectId>` - 切换当前项目
- `/agent <agentId>` - 切换当前 Agent

使用 `/list` 查看可用选项：
- `/list -m` 或 `/list --models` - 查看模型列表
- `/list -p` 或 `/list --projects` - 查看项目列表
- `/list -a` 或 `/list --agents` - 查看 Agent 列表

<Callout type="info">
如果需要查看更多技术细节，可参考 specs 目录中的 Telegram 远程控制架构说明。
</Callout>
